<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PROJECT001</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #0a0a0a;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas { display: block; }
  </style>
</head>
<body>

  <!-- Phaser 3 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>

  <script>
    // ─────────────────────────────────────────
    // 씬: 부팅 화면 (BootScene)
    // ─────────────────────────────────────────
    class BootScene extends Phaser.Scene {
      constructor() { super({ key: 'BootScene' }); }

      preload() {
        // 로딩 바 배경
        const width = this.scale.width;
        const height = this.scale.height;

        const progressBar = this.add.graphics();
        const progressBox = this.add.graphics();
        progressBox.fillStyle(0x1a1a1a, 1);
        progressBox.fillRect(width / 2 - 160, height / 2 - 15, 320, 30);

        this.load.on('progress', (value) => {
          progressBar.clear();
          progressBar.fillStyle(0xcccccc, 1);
          progressBar.fillRect(width / 2 - 155, height / 2 - 10, 310 * value, 20);
        });

        this.load.on('complete', () => {
          progressBar.destroy();
          progressBox.destroy();
        });

        // TODO: 여기에 에셋 로드 추가
        // this.load.image('key', 'assets/images/file.png');
      }

      create() {
        this.scene.start('MainMenuScene');
      }
    }

    // ─────────────────────────────────────────
    // 씬: 메인 메뉴 (MainMenuScene)
    // ─────────────────────────────────────────
    class MainMenuScene extends Phaser.Scene {
      constructor() { super({ key: 'MainMenuScene' }); }

      create() {
        const { width, height } = this.scale;

        // 배경
        this.add.rectangle(0, 0, width, height, 0x0a0a0a).setOrigin(0);

        // 타이틀
        this.add.text(width / 2, height / 2 - 80, 'PROJECT001', {
          fontSize: '48px',
          fill: '#ffffff',
          fontFamily: 'monospace',
          letterSpacing: 8
        }).setOrigin(0.5);

        // 서브타이틀
        this.add.text(width / 2, height / 2 - 30, '──────────────', {
          fontSize: '16px',
          fill: '#444444',
          fontFamily: 'monospace'
        }).setOrigin(0.5);

        // 시작 버튼
        const startText = this.add.text(width / 2, height / 2 + 40, '[ 시작 ]', {
          fontSize: '24px',
          fill: '#aaaaaa',
          fontFamily: 'monospace'
        }).setOrigin(0.5).setInteractive({ useHandCursor: true });

        // 호버 효과
        startText.on('pointerover', () => startText.setStyle({ fill: '#ffffff' }));
        startText.on('pointerout', () => startText.setStyle({ fill: '#aaaaaa' }));
        startText.on('pointerdown', () => {
          this.scene.start('GameScene');
        });

        // 깜빡임 애니메이션
        this.tweens.add({
          targets: startText,
          alpha: 0.3,
          duration: 900,
          yoyo: true,
          repeat: -1,
          ease: 'Sine.easeInOut'
        });
      }
    }

    // ─────────────────────────────────────────
    // 씬: 게임 (GameScene) — 프로토타입
    // ─────────────────────────────────────────
    class GameScene extends Phaser.Scene {
      constructor() { super({ key: 'GameScene' }); }

      create() {
        const { width, height } = this.scale;

        this.add.rectangle(0, 0, width, height, 0x0d0d0d).setOrigin(0);

        this.add.text(width / 2, height / 2 - 20, '[ PROTOTYPE ]', {
          fontSize: '20px',
          fill: '#666666',
          fontFamily: 'monospace'
        }).setOrigin(0.5);

        this.add.text(width / 2, height / 2 + 20, '게임 씬 개발 중...', {
          fontSize: '14px',
          fill: '#444444',
          fontFamily: 'monospace'
        }).setOrigin(0.5);

        // ESC로 메인메뉴 복귀
        this.input.keyboard.on('keydown-ESC', () => {
          this.scene.start('MainMenuScene');
        });

        this.add.text(width / 2, height - 30, 'ESC — 메인 메뉴로', {
          fontSize: '12px',
          fill: '#333333',
          fontFamily: 'monospace'
        }).setOrigin(0.5);
      }
    }

    // ─────────────────────────────────────────
    // Phaser 게임 설정
    // ─────────────────────────────────────────
    const config = {
      type: Phaser.AUTO,
      width: 1280,
      height: 720,
      backgroundColor: '#0a0a0a',
      scene: [BootScene, MainMenuScene, GameScene],
      scale: {
        mode: Phaser.Scale.FIT,
        autoCenter: Phaser.Scale.CENTER_BOTH
      }
    };

    const game = new Phaser.Game(config);
  </script>

</body>
</html>
